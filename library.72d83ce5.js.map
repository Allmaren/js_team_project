{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAAMC,EAAYC,SAASC,cAAc,oBACnCC,EAAYF,SAASC,cAAc,sBACnCE,EAAUH,SAASC,cAAc,oBACjCG,EAAiBJ,SAASC,cAAc,gBACxCI,EAAoBL,SAASC,cAAc,gBAC3CK,EAAkBN,SAASC,cAAc,cAK/CC,EAAUK,iBAAiB,SAsB3B,WACOC,GAGHH,EAAkBI,UAAUC,IAAI,uBAChCJ,EAAgBG,UAAUE,OAAO,uBACjCC,EAAUC,EAAAC,iBAAkBN,EA/BhB,aA2BZ,EAAAO,EAAAC,gB,IAvBJb,EAAQI,iBAAiB,SA+BzB,WACOC,GAGHH,EAAkBI,UAAUE,OAAO,uBACnCL,EAAgBG,UAAUC,IAAI,uBAC9BE,EAAUC,EAAAI,eAAgBT,EAxCf,YAoCX,EAAAO,EAAAC,gB,IA/BJ,MAAMR,EAASU,KAAKC,MAAMC,aAAaC,QAAQ,YAE/C,GAAKb,EAaHH,EAAkBI,UAAUC,IAAI,uBAChCE,EAAUC,EAAAC,iBAAkBN,EAtBd,eAQH,CACX,IAAIc,EAAsBtB,SAASuB,cAAc,KACjDD,EAAoBE,UAAY,4BAChCF,EAAoBG,UAClB,uEACFrB,EAAesB,OAAOJ,GACtBK,YAAW,IAAML,EAAoBX,UAAU,KAE/CZ,EAAU0B,UAAY,GACtB,MAAMG,EACJ,wEACF7B,EAAU8B,mBAAmB,YAAaD,E,CA0B5CE,eAAelB,EAAUmB,EAAYC,EAAQC,GAC3C,MAIMC,SAJiBH,EAAWC,GAC/BG,MAAKC,GAAOA,IACZC,OAAMC,GAASC,QAAQC,IAAIF,MAEFG,MAAM,GAGlC,GADA1C,EAAU0B,UAAY,GACI,IAAtBS,EAAWQ,OAAc,CAC3B3C,EAAU0B,UAAY,GACtB,MAAMG,EAAQ,sDAAsDK,uBACpElC,EAAU8B,mBAAmB,YAAaD,E,CAG5CM,EAAWS,KAAIb,MAAMc,IACnB,MAAMC,QAAiBhD,EAAAiD,QAAMC,IAC3B,sCAAsCH,8CAK1C,IAA4BI,IAHPH,EAASI,KAI5BlD,EAAU8B,mBAAmB,YAG/B,UAA2BqB,eACzBA,EAAcC,YACdA,EAAWC,aACXA,EAAYC,GACZA,EAAEC,aACFA,EAAYC,OACZA,IAEA,MAAMC,EAAY,GAIlB,OAHAD,EAAOE,SAAQb,IACbY,EAAUE,KAAKd,EAAGe,KAAK,IAElB,sFAIHR,EACI,kCAAkCA,IAClC,kCACKD,eAA4BG,wEAERH,4DAErBM,EACLf,MAAM,EAAG,GACTE,KAAIC,GAAMA,IACVgB,KAAK,QACVJ,EAAUd,OAAUc,EAAUd,OAAS,EAAI,UAAY,GAAM,4BAC7CY,EAAab,MAAM,EAAG,qDAElCW,EAAeA,EAAaS,QAAQ,GAAK,mC,CAjCLC,CAAkBd,GAJ3B,G","sources":["src/js/library.js"],"sourcesContent":["import axios from 'axios';\nimport { onToggleModal } from './authentication';\nimport { allMoviesWatched, allMoviesQueue } from './services/firebase';\n\nconst libraryUl = document.querySelector('.my-library-list');\nconst watchedEL = document.querySelector('button.btn-watched');\nconst queueEl = document.querySelector('button.btn-queue');\nconst libraryWrapper = document.querySelector('.nav-library');\nconst currentWatchedBtn = document.querySelector('.btn-watched');\nconst currentQueueBtn = document.querySelector('.btn-queue');\n\nconst watched = 'watched';\nconst queque = 'queque';\n\nwatchedEL.addEventListener('click', getWatchedFilms);\nqueueEl.addEventListener('click', getQueueFilms);\n\nconst userId = JSON.parse(localStorage.getItem('user-id'));\n\nif (!userId) {\n  let notificationLibrary = document.createElement('p');\n  notificationLibrary.className = 'notification-update-movie';\n  notificationLibrary.innerHTML =\n    'To create your collections of movies you have to log in on Home page';\n  libraryWrapper.append(notificationLibrary);\n  setTimeout(() => notificationLibrary.remove(), 6000);\n\n  libraryUl.innerHTML = '';\n  const imgEl =\n    '<li class=\"library-photo-item\"><div class=\"library-photo\"></div></li>';\n  libraryUl.insertAdjacentHTML('beforeend', imgEl);\n} else {\n  currentWatchedBtn.classList.add('btn-library-current');\n  getMovies(allMoviesWatched, userId, watched);\n}\n\nfunction getWatchedFilms() {\n  if (!userId) {\n    onToggleModal();\n  } else {\n    currentWatchedBtn.classList.add('btn-library-current');\n    currentQueueBtn.classList.remove('btn-library-current');\n    getMovies(allMoviesWatched, userId, watched);\n  }\n}\n\nfunction getQueueFilms() {\n  if (!userId) {\n    onToggleModal();\n  } else {\n    currentWatchedBtn.classList.remove('btn-library-current');\n    currentQueueBtn.classList.add('btn-library-current');\n    getMovies(allMoviesQueue, userId, queque);\n  }\n}\n\nasync function getMovies(fetchFilms, userId, photo) {\n  const getFilms = await fetchFilms(userId)\n    .then(res => res)\n    .catch(error => console.log(error));\n\n  const arrayFilms = getFilms.slice(1);\n\n  libraryUl.innerHTML = '';\n  if (arrayFilms.length === 0) {\n    libraryUl.innerHTML = '';\n    const imgEl = `<li class=\"library-photo-item\"><div class=\"library-${photo}-photo\"></div></li>`;\n    libraryUl.insertAdjacentHTML('beforeend', imgEl);\n  }\n\n  arrayFilms.map(async el => {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/movie/${el}?api_key=1234dced32e7dcd076b4111d81f37c06`\n    );\n    renderLibraryFilms(response.data);\n  });\n\n  function renderLibraryFilms(object) {\n    libraryUl.insertAdjacentHTML('beforeend', createLibraryCard(object));\n  }\n\n  function createLibraryCard({\n    original_title,\n    poster_path,\n    vote_average,\n    id,\n    release_date,\n    genres,\n  }) {\n    const genreList = [];\n    genres.forEach(el => {\n      genreList.push(el.name);\n    });\n    return `\n    <li class=\"card-item\" >\n      <div class=\"card-item__img\">\n      <img src=\"${\n        poster_path\n          ? `https://image.tmdb.org/t/p/w500${poster_path}`\n          : './images/no_image.jpg'\n      }\"  alt=\"${original_title}\" data-id=\"${id}\" loading=\"lazy\">\n      </div>\n      <h3 class=\"card-item__title\">${original_title}</h3>\n      <p class=\"card-item__info\">\n        <span>${genreList\n          .slice(0, 2)\n          .map(el => el)\n          .join(', ')}${\n      genreList.length ? (genreList.length > 2 ? ', Other' : '') : 'No genre'\n    } </span> <span>${release_date.slice(0, 4)}</span>\n        <span class=\"card-item__vote\"> ${\n          vote_average ? vote_average.toFixed(1) : '0'\n        }</span>\n      </p>\n    </li>`;\n  }\n}\n"],"names":["$2shzp","parcelRequire","$1cafa503bc57b7a0$var$libraryUl","document","querySelector","$1cafa503bc57b7a0$var$watchedEL","$1cafa503bc57b7a0$var$queueEl","$1cafa503bc57b7a0$var$libraryWrapper","$1cafa503bc57b7a0$var$currentWatchedBtn","$1cafa503bc57b7a0$var$currentQueueBtn","addEventListener","$1cafa503bc57b7a0$var$userId","classList","add","remove","$1cafa503bc57b7a0$var$getMovies","$aBKb3","allMoviesWatched","$d2gfz","onToggleModal","allMoviesQueue","JSON","parse","localStorage","getItem","notificationLibrary","createElement","className","innerHTML","append","setTimeout","imgEl","insertAdjacentHTML","async","fetchFilms","userId1","photo","arrayFilms","then","res","catch","error","console","log","slice","length","map","el","response","default","get","object","data","original_title","poster_path","vote_average","id","release_date","genres","genreList","forEach","push","name","join","toFixed","createLibraryCard"],"version":3,"file":"library.72d83ce5.js.map"}