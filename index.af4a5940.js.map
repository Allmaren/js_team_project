{"mappings":"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","sources":["src/home.js","src/js/fetch-film.js","src/js/fetch-trend.js","src/js/button-auth.js"],"sourcesContent":["import './js/component/spinner';\nimport './js/fetch-film';\nimport './js/fetch-trend';\nimport './js/pagination';\nimport './js/watched';\nimport './js/modal-film';\nimport './js/authentication';\nimport './js/modal-team';\nimport './js/component/render';\nimport './js/component/dark-mode';\nimport './js/component/scroll-up';\nimport './js/button-auth';\n","import renderCard from './component/render';\n\nimport Pagination from 'tui-pagination';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/search/movie';\nconst API_KEY = '57c452bac8b733cbb049921c3a15e368';\n\nconst searchForm = document.querySelector('.header__form');\nconst gallery = document.querySelector('.search-film__by-name-js');\n\nconst searchQuery = document.querySelector('.search-film__input');\nconst warningText = document.querySelector('.header__warning-text-js');\n\nconst container = document.getElementById('pagination');\nconst paginatorOptions = {\n  itemsPerPage: 20,\n  visiblePages: 5,\n};\nsearchForm.addEventListener('submit', searchHandler);\nsearchQuery.addEventListener('click', inputHandler);\n\nfunction searchHandler(event) {\n  event.preventDefault();\n\n  const inputQuery = searchQuery.value;\n\n  if (inputQuery === '') {\n    warningText.classList.remove('is-hidden-warn');\n  } else {\n    fetchData(searchQuery).then(() => {\n      new Pagination(container, paginatorOptions).on(\n        'afterMove',\n        function (eventData) {\n          fetchData(searchQuery, eventData.page);\n          window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n      );\n    });\n  }\n}\n\nfunction inputHandler(event) {\n  warningText.classList.add('is-hidden-warn');\n}\n\nfunction fetchData(searchQuery, page = 1) {\n  const params = `api_key=${API_KEY}&query='${searchQuery.value}'&language=en-US&page=${page}&include_adult=false`;\n  const url = `${BASE_URL}?${params}`;\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      paginatorOptions.totalItems = data.total_results;\n      return data.results;\n    })\n    .then(films => {\n      if (films.length >= 1) {\n        renderCard(films, gallery);\n        warningText.classList.add('is-hidden-warn');\n      } else {\n        warningText.classList.remove('is-hidden-warn');\n      }\n    })\n    .catch(error => console.log(error));\n}\n","// import axios from 'axios';\nimport renderCard from './component/render';\nimport Pagination from 'tui-pagination';\n\nconst ul = document.querySelector('.trending__collection');\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst TRENDING = 'trending/movie/week';\nconst API_KEY = '1d8f1c2313e3ed4d118cc85bb96261b9';\n\nlet isFirstFetch = true;\nconst container = document.getElementById('pagination');\nconst paginatorOptions = {\n  itemsPerPage: 20,\n  visiblePages: 5,\n};\n\ngetFetchTrending().then(() => {\n  let pagin = new Pagination(container, paginatorOptions);\n  pagin.on('afterMove', function (eventData) {\n    const currentPage = eventData.page;\n    getFetchTrending(eventData.page);\n    localStorage.setItem('currentTrendPage', eventData.page);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  });\n  pagin.movePageTo(localStorage.getItem('currentTrendPage'));\n});\n\nfunction getFetchTrending(page = 1) {\n  let currentTrendPage = localStorage.getItem('currentTrendPage')\n    ? localStorage.getItem('currentTrendPage')\n    : 1;\n\n  return fetch(\n    `${BASE_URL}${TRENDING}?api_key=${API_KEY}&language=en-US&page=${\n      isFirstFetch ? currentTrendPage : page\n    }&include_adult=false`\n  )\n    .then(response => response.json())\n    .then(data => {\n      paginatorOptions.totalItems = data.total_results;\n      isFirstFetch = false;\n      return data.results;\n    })\n    .then(films => renderCard(films, ul))\n    .catch(error => console.log(error));\n}\n","import { onToggleModal } from './authentication';\nimport { reloadHome } from './services/reload-library';\nimport { Notify } from 'notiflix';\n\nconst userId = JSON.parse(localStorage.getItem('user-id'));\nconst loginBtn = document.querySelector('.login-btn');\n\nif (userId) {\n  loginBtn.textContent = 'LOG OUT';\n}\n\nif (!userId) {\n  loginBtn.addEventListener('click', onToggleModal);\n} else {\n  loginBtn.addEventListener('click', () => {\n    if (userId) {\n      localStorage.removeItem('user-id');\n      Notify.info(`You have logged out! Ð¡ome again!`, {\n        fontSize: '16px',\n      });\n      setTimeout(() => {\n        reloadHome();\n      }, 3000);\n    }\n  });\n}\n"],"names":["parcelRequire","$lGgu3","$353616bd795d8b53$var$BASE_URL","$353616bd795d8b53$var$API_KEY","$353616bd795d8b53$var$searchForm","document","querySelector","$353616bd795d8b53$var$gallery","$353616bd795d8b53$var$searchQuery","$353616bd795d8b53$var$warningText","$353616bd795d8b53$var$container","getElementById","$353616bd795d8b53$var$paginatorOptions","itemsPerPage","visiblePages","$353616bd795d8b53$var$fetchData","searchQuery1","page","arguments","length","params","concat","value","url","fetch","then","response","json","data","totalItems","total_results","results","films","default","classList","add","remove","catch","error","console","log","addEventListener","event","preventDefault","$parcel$interopDefault","$1VFfL","on","eventData","window","scrollTo","top","behavior","$382e262059c13c14$var$ul","$382e262059c13c14$var$BASE_URL","$382e262059c13c14$var$TRENDING","$382e262059c13c14$var$API_KEY","$382e262059c13c14$var$isFirstFetch","$382e262059c13c14$var$container","$382e262059c13c14$var$paginatorOptions","$382e262059c13c14$var$getFetchTrending","currentTrendPage","localStorage","getItem","pagin","setItem","movePageTo","$95ECi","$eb503fa934a666b8$var$userId","JSON","parse","$eb503fa934a666b8$var$loginBtn","textContent","removeItem","$iU1Pc","Notify","info","fontSize","setTimeout","$bdoxL","reloadHome","onToggleModal"],"version":3,"file":"index.af4a5940.js.map"}