{"mappings":"qhBAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,aAIA,MAGME,EAAaC,SAASC,cAAc,iBACpCC,EAAUF,SAASC,cAAc,4BAEjCE,EAAcH,SAASC,cAAc,uBACrCG,EAAcJ,SAASC,cAAc,4BAErCI,EAAYL,SAASM,eAAe,cACpCC,EAAmB,CACvBC,aAAc,GACdC,aAAc,GA6BhB,SAASC,EAAUC,EAAaC,EAAO,GACrC,MAAMC,EAAS,mDAA6BF,EAAYG,8BAA8BF,wBAGtF,OAAOG,MAFK,6CAAeF,KAGxBG,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJZ,EAAiBa,WAAaD,EAAKE,cAC5BF,EAAKG,WAEbN,MAAKO,IACAA,EAAMC,QAAU,IAClB,EAAA1B,EAAA2B,SAAWF,EAAOrB,GAClBE,EAAYsB,UAAUC,IAAI,mBAE1BvB,EAAYsB,UAAUE,OAAO,iBAAiB,IAGjDC,OAAMC,GAASC,QAAQC,IAAIF,I,CA7ChC/B,EAAWkC,iBAAiB,UAG5B,SAAuBC,GACrBA,EAAMC,iBAIa,KAFAhC,EAAYW,MAG7BV,EAAYsB,UAAUE,OAAO,kBAE7BlB,EAAUP,GAAaa,MAAK,KAC1B,IAAIoB,EAAAC,GAAJ,CAAehC,EAAWE,GAAkB+B,GAC1C,aACA,SAAUC,GACR7B,EAAUP,EAAaoC,EAAU3B,MACjC4B,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,U,GAEvC,G,IAjBPxC,EAAY8B,iBAAiB,SAsB7B,SAAsBC,GACpB9B,EAAYsB,UAAUC,IAAI,iB,ICzC5B7B,EAAAD,EAAA,S,aAGA,MAAM+C,EAAK5C,SAASC,cAAc,yBAMlC,IAAI4C,GAAe,EACnB,MAAMC,EAAY9C,SAASM,eAAe,cACpCyC,EAAmB,CACvBvC,aAAc,GACdC,aAAc,GAchB,SAASuC,EAAiBpC,EAAO,GAC/B,IAAIqC,EAAmBC,aAAaC,QAAQ,oBACxCD,aAAaC,QAAQ,oBACrB,EAEJ,OAAOpC,MACL,iHACE8B,EAAeI,EAAmBrC,yBAGnCI,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJ4B,EAAiB3B,WAAaD,EAAKE,cACnCwB,GAAe,EACR1B,EAAKG,WAEbN,MAAKO,IAAS,EAAAzB,EAAA2B,SAAWF,EAAOqB,KAChCf,OAAMC,GAASC,QAAQC,IAAIF,I,CA5BhCkB,IAAmBhC,MAAK,KACtB,IAAIoC,EAAQ,IAAIhB,EAAAC,GAAJ,CAAeS,EAAWC,GACtCK,EAAMd,GAAG,aAAa,SAAUC,GACVA,EAAU3B,KAC9BoC,EAAiBT,EAAU3B,MAC3BsC,aAAaG,QAAQ,mBAAoBd,EAAU3B,MACnD4B,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,U,IAEtCS,EAAME,WAAWJ,aAAaC,QAAQ,oBAAoB,I,wFCzB5D,IAAAI,EAAA1D,EAAA,S,0BAIA,MAAM2D,EAASC,KAAKC,MAAMR,aAAaC,QAAQ,YACzCQ,EAAW3D,SAASC,cAAc,cAEpCuD,IACFG,EAASC,YAAc,WAGpBJ,EAGHG,EAAS1B,iBAAiB,SAAS,KAC7BuB,IACFN,aAAaW,WAAW,WACxBC,EAAAC,OAAOC,KAAK,mCAAkC,CAC5CC,SAAU,SAEZC,YAAW,MACT,EAAAC,EAAAC,aAAY,GACX,K,IAVPT,EAAS1B,iBAAiB,QAASsB,EAAAc","sources":["src/home.js","src/js/fetch-film.js","src/js/fetch-trend.js","src/js/button-auth.js"],"sourcesContent":["import './js/component/spinner';\nimport './js/fetch-film';\nimport './js/fetch-trend';\nimport './js/pagination';\nimport './js/watched';\nimport './js/modal-film';\nimport './js/authentication';\nimport './js/modal-team';\nimport './js/component/render';\nimport './js/component/dark-mode';\nimport './js/component/scroll-up';\nimport './js/button-auth';\n","import renderCard from './component/render';\n\nimport Pagination from 'tui-pagination';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/search/movie';\nconst API_KEY = '57c452bac8b733cbb049921c3a15e368';\n\nconst searchForm = document.querySelector('.header__form');\nconst gallery = document.querySelector('.search-film__by-name-js');\n\nconst searchQuery = document.querySelector('.search-film__input');\nconst warningText = document.querySelector('.header__warning-text-js');\n\nconst container = document.getElementById('pagination');\nconst paginatorOptions = {\n  itemsPerPage: 20,\n  visiblePages: 5,\n};\nsearchForm.addEventListener('submit', searchHandler);\nsearchQuery.addEventListener('click', inputHandler);\n\nfunction searchHandler(event) {\n  event.preventDefault();\n\n  const inputQuery = searchQuery.value;\n\n  if (inputQuery === '') {\n    warningText.classList.remove('is-hidden-warn');\n  } else {\n    fetchData(searchQuery).then(() => {\n      new Pagination(container, paginatorOptions).on(\n        'afterMove',\n        function (eventData) {\n          fetchData(searchQuery, eventData.page);\n          window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n      );\n    });\n  }\n}\n\nfunction inputHandler(event) {\n  warningText.classList.add('is-hidden-warn');\n}\n\nfunction fetchData(searchQuery, page = 1) {\n  const params = `api_key=${API_KEY}&query='${searchQuery.value}'&language=en-US&page=${page}&include_adult=false`;\n  const url = `${BASE_URL}?${params}`;\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      paginatorOptions.totalItems = data.total_results;\n      return data.results;\n    })\n    .then(films => {\n      if (films.length >= 1) {\n        renderCard(films, gallery);\n        warningText.classList.add('is-hidden-warn');\n      } else {\n        warningText.classList.remove('is-hidden-warn');\n      }\n    })\n    .catch(error => console.log(error));\n}\n","// import axios from 'axios';\nimport renderCard from './component/render';\nimport Pagination from 'tui-pagination';\n\nconst ul = document.querySelector('.trending__collection');\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst TRENDING = 'trending/movie/week';\nconst API_KEY = '1d8f1c2313e3ed4d118cc85bb96261b9';\n\nlet isFirstFetch = true;\nconst container = document.getElementById('pagination');\nconst paginatorOptions = {\n  itemsPerPage: 20,\n  visiblePages: 5,\n};\n\ngetFetchTrending().then(() => {\n  let pagin = new Pagination(container, paginatorOptions);\n  pagin.on('afterMove', function (eventData) {\n    const currentPage = eventData.page;\n    getFetchTrending(eventData.page);\n    localStorage.setItem('currentTrendPage', eventData.page);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  });\n  pagin.movePageTo(localStorage.getItem('currentTrendPage'));\n});\n\nfunction getFetchTrending(page = 1) {\n  let currentTrendPage = localStorage.getItem('currentTrendPage')\n    ? localStorage.getItem('currentTrendPage')\n    : 1;\n\n  return fetch(\n    `${BASE_URL}${TRENDING}?api_key=${API_KEY}&language=en-US&page=${\n      isFirstFetch ? currentTrendPage : page\n    }&include_adult=false`\n  )\n    .then(response => response.json())\n    .then(data => {\n      paginatorOptions.totalItems = data.total_results;\n      isFirstFetch = false;\n      return data.results;\n    })\n    .then(films => renderCard(films, ul))\n    .catch(error => console.log(error));\n}\n","import { onToggleModal } from './authentication';\nimport { reloadHome } from './services/reload-library';\nimport { Notify } from 'notiflix';\n\nconst userId = JSON.parse(localStorage.getItem('user-id'));\nconst loginBtn = document.querySelector('.login-btn');\n\nif (userId) {\n  loginBtn.textContent = 'LOG OUT';\n}\n\nif (!userId) {\n  loginBtn.addEventListener('click', onToggleModal);\n} else {\n  loginBtn.addEventListener('click', () => {\n    if (userId) {\n      localStorage.removeItem('user-id');\n      Notify.info(`You have logged out! Ð¡ome again!`, {\n        fontSize: '16px',\n      });\n      setTimeout(() => {\n        reloadHome();\n      }, 3000);\n    }\n  });\n}\n"],"names":["parcelRequire","$f6r1C","$f7ab68046dda0dae$var$searchForm","document","querySelector","$f7ab68046dda0dae$var$gallery","$f7ab68046dda0dae$var$searchQuery","$f7ab68046dda0dae$var$warningText","$f7ab68046dda0dae$var$container","getElementById","$f7ab68046dda0dae$var$paginatorOptions","itemsPerPage","visiblePages","$f7ab68046dda0dae$var$fetchData","searchQuery1","page","params","value","fetch","then","response","json","data","totalItems","total_results","results","films","length","default","classList","add","remove","catch","error","console","log","addEventListener","event","preventDefault","$parcel$interopDefault","$fb9GJ","on","eventData","window","scrollTo","top","behavior","$0edbede52cced709$var$ul","$0edbede52cced709$var$isFirstFetch","$0edbede52cced709$var$container","$0edbede52cced709$var$paginatorOptions","$0edbede52cced709$var$getFetchTrending","currentTrendPage","localStorage","getItem","pagin","setItem","movePageTo","$d2gfz","$943696f0021bdeea$var$userId","JSON","parse","$943696f0021bdeea$var$loginBtn","textContent","removeItem","$eWCmQ","Notify","info","fontSize","setTimeout","$2ngji","reloadHome","onToggleModal"],"version":3,"file":"index.d436de0c.js.map"}